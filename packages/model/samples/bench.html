<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Benchmark</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <label>Items: 10e<input type="number" id="items" min="1" step="1" value="6" /></label>
    <label>Sets: <input type="number" id="sets" min="2" step="1" value="50" /></label>
    <label>Type: <select id="type">
      <option>intersection</option>
      <option selected>distinctIntersection</option>
    </select></label>
    <script type="module">
      import { generateCombinations, extractSets, extractCombinations } from '../dist/index.js';

      function generate(numItems, numSets) {
        const sets = Array(numSets)
          .fill(0)
          .map((_, i) => `s${i}`);
        return Array(numItems)
          .fill(0)
          .map((_, i) => ({
            name: `e${i}`,
            sets: sets.filter(() => Math.random() < 1 / sets.length),
          }));
      }
      const items = document.getElementById('items');
      const sets = document.getElementById('sets');
      const type = document.getElementById('type');

      items.onchange = sets.onchange = type.onchange = run;

      function run() {
        console.log(Math.pow(10, items.valueAsNumber), sets.valueAsNumber, type.value);
        const rows = generate(Math.pow(10, items.valueAsNumber), sets.valueAsNumber);
        console.time('sets');
        const s = extractSets(rows);
        console.timeEnd('sets');
        // console.time('generate');
        // const rNew = generateCombinations(s, {type: type.value});
        // console.timeEnd('generate');
        console.time('extract');
        const rExtract = extractCombinations(rows, { sets: s, type: type.value });
        console.timeEnd('extract');
      }
      // run();
    </script>
  </body>
</html>
